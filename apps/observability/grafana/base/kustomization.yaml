apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
helmCharts:
- name: grafana 
  releaseName: grafana
  version: 6.16.13
  repo: https://grafana.github.io/helm-charts
  includeCRDs: true
  valuesInline:
    enabled: true
    fullnameOverride: grafana

    adminUser: admin
    adminPassword: istio
    dashboards:
      default:
        kubernetes-cluster:
          gnetId: 7249
          revision: 1
          datasource: Prometheus
        node-exporter:
          gnetId: 1860
          revision: 23
          datasource: Prometheus
        kubernetes-cluster-monitoring-prometheus:
          gnetId: 1621
          datasource: Prometheus
        prometheus-stats:
          gnetId: 2
          revision: 2
          datasource: Prometheus
        istio-mesh:
          gnetId: 7639
          revision: 92
          datasource: Prometheus
        istio-service:
          gnetId: 7636
          revision: 92
          datasource: Prometheus
        istio-workload:
          gnetId: 7630
          revision: 92
          datasource: Prometheus
        istio-performance:
          gnetId: 11829
          revision: 92
          datasource: Prometheus
        istio-controlplane:
          gnetId: 7645
          revision: 92
          datasource: Prometheus
        jaeger:
          gnetId: 10001
          revision: 2
          datasource: Prometheus
    dashboardProviders:
      dashboardproviders.yaml:
        apiVersion: 1
        providers:
          - name: default
            orgId: 1
            folder: ""
            type: file
            disableDeletion: false
            editable: false
            options:
              path: /var/lib/grafana/dashboards/default
    datasources:
      datasources.yaml:
        apiVersion: 1
        datasources:
          - name: Prometheus
            type: prometheus
            url: http://prometheus:80
            access: proxy
            orgId: 1
            uid: prometheus
            isDefault: true
    persistence:
      enabled: true
    service:
      type: LoadBalancer